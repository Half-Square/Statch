<!--
* @Author                : Jbristhuille<jean-baptiste@halfsquare.fr>
* @CreatedDate           : 2023-09-27 15:26:00
* @LastEditors           : Jbristhuille<jean-baptiste@halfsquare.fr>
* @LastEditDate          : 2024-01-31 16:57:52
-->

<div class="ptt-comment">

  <h2 class="subtitle">Comments</h2>

  <div class="comment" *ngFor="let comment of comments">

    <div class="header">
      <core-avatar  [imgLink]="comment.authorId | recovery:'picture':'users' | async"
                    [label]="comment.authorId | recovery:'name':'users' | async" />
      <div class="option">
        <span class="date">{{ comment.created | dateDifference }}</span>
        <core-button (click)="onDelete(comment.id)"
                     [type]="'basic'"
                     [style]="'warn'"
                     [size]="'icon'"
                     [tooltip]="'Delete'">
          <core-icon icon="minus"/>
        </core-button>
      </div>
    </div>

    <div class="content" [innerHTML]="trustedContent(comment.content)">
    </div>

  </div>


  <div class="input">
    <component-markdown [placeholder]="'Leave your comment...'"
                        [hasPublish]="hasPublish"
                        (getContent)="getContent($event)" />

    <core-button  (click)="publish()"
                  [type]="'flat'"
                  [style]="'primary'"
                  [size]="'medium'"
                  [label]="'Publish'" />
  </div>

</div>
