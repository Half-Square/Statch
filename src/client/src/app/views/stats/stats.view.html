<!--
* @Author                : Jbristhuille<jbristhuille@gmail.com>
* @CreatedDate           : 2024-01-15 17:23:00
* @LastEditors           : Jbristhuille<jbristhuille@gmail.com>
* @LastEditDate          : 2024-08-26 15:43:48
-->

<div class="stats-view">
  <ng-template [ngIf]="stats" [ngIfElse]="loading">
    Nb. tasks {{stats.tasks.total}}

    <div class="chart-container tasks-by-status" *ngIf="tasksByStatus">
      <apx-chart  [series]="tasksByStatus.data"
                  [labels]="tasksByStatus.labels"
                  [chart]="{type: 'polarArea'}"
                  [title]="{text: 'Tasks by status'}"/>
    </div>

    <div class="chart-container new-by-month" *ngIf="newByMonth">
      <apx-chart  [series]="[{name: 'new', data: newByMonth.data}]"
                  [plotOptions]="{bar: {dataLabels: {position: 'top'}}}"
                  [xaxis]="{categories: newByMonth.labels}"
                  [chart]="{type: 'bar'}"
                  [title]="{text: 'New by month '+stats.tasks.newByMonth[0].year}"/>
    </div>

    <div class="chart-container tasks-by-label" *ngIf="tasksByLabel">
      <apx-chart  [series]="tasksByLabel.data"
                  [labels]="tasksByLabel.labels"
                  [chart]="{type: 'polarArea'}"
                  [title]="{text: 'Tasks by labels'}"/>
    </div>

    <div class="chart-container tasks-by-versions" *ngIf="tasksByVersions">
      <apx-chart  [series]="tasksByVersions.data"
                  [labels]="tasksByVersions.labels"
                  [chart]="{type: 'polarArea'}"
                  [title]="{text: 'Tasks by versions'}"/>
    </div>

    <div class="chart-container tasks-by-levels" *ngIf="tasksByLevels">
      <apx-chart  [series]="tasksByLevels.data"
                  [labels]="tasksByLevels.labels"
                  [chart]="{type: 'polarArea'}"
                  [title]="{text: 'Tasks by levels'}"/>
    </div>
  </ng-template>

  <ng-template #loading>
    <div class="loading">
      <core-loading/>
    </div>
  </ng-template>
</div>
