<!--
* @Author                : 0K00<qdouvillez@gmail.com>
* @CreatedDate           : 2023-03-17 14:41:00
* @LastEditors           : 0K00<qdouvillez@gmail.com>
* @LastEditDate          : 2023-04-12 14:53:15
-->

<div id="nav">
  <a href="/projects"><header>Half Square</header></a>
  <nav>
    <app-button id="goProjects" type="trd" size="l"
                icon="dashboard" iconPosition="only"
                routerLink="/projects" />
    <app-button id="goActivity" type="trd" size="l"
    icon="{{ activities > 0 ? 'bell-notif' : 'bell' }}" iconPosition="only"
    routerLink="/activity">
    </app-button>
    <app-button id="add" type="trd" size="l"
                icon="plus" iconPosition="only"
                (click)="openNew()"  />
    <app-button id="goFollow" type="trd" size="l"
                icon="flag" iconPosition="only"
                routerLink="/assign"  />
    <app-button id="goSetting" type="trd" size="l"
                icon="box" iconPosition="only"
                [routerLink]="['/extension']"  />
  </nav>
  <div class="menu">
    <div class="collapses">
      <app-collapse *ngFor="let project of projects"
        [label]="project.name"
        [id]="project.id"
        [type]="'project'"
        [status]="project.status"
        [isOpen]="project.id == projectId"
        [isActive]="project.id == projectId && !taskId && !ticketId"
        (onOpen)="command.getProject(project.id)"
        [depth]="0">
        <app-collapse *ngFor="let task of project.tasks"
          [label]="task.name"
          [id]="task.id"
          [type]="'task'"
          [status]="task.status"
          [isOpen]="task.id == taskId"
          [isActive]="task.id == taskId && !ticketId"
          (onOpen)="command.getTask(task.id)"
          [depth]="1">
          <app-collapse *ngFor="let ticket of task.tickets"
            [label]="ticket.name"
            [id]="ticket.id"
            [type]="'ticket'"
            [status]="ticket.status"
            [noContent]="true"
            [isActive]="ticket.id == ticketId"
            [depth]="3">
          </app-collapse>
        </app-collapse>
      </app-collapse>
    </div>
  </div>
</div>
