<!--
* @Author                : 0K00<qdouvillez@gmail.com>
* @CreatedDate           : 2023-03-17 15:15:00
* @LastEditors           : 0K00<qdouvillez@gmail.com>
* @LastEditDate          : 2023-03-20 18:06:15
*
-->

<div class="searchBar">
  <div class="searchInput">
    <i *ngIf="stepSearch < 1" class="icon search"></i>
    <div *ngIf="stepSearch > 0" (click)="returnStep(0)" class="return">
      <i  class="icon chevron-left"></i>
    </div>
    <div class="resultContainer">
      <div *ngFor="let resultSelected of resultsSelected; let step = index" class="label">
        <div class="text">
          {{ resultSelected.name ? resultSelected.name : '' }}
        </div>
        <div (click)="returnStep(step)" class="return">
          <i  class="icon cross-2"></i>
        </div>
      </div>
    </div>
    <input type="text" id="inputSearch" autocomplete="off"
      placeholder="Search..."
      [(ngModel)]="query"
      appFocusOnShow
      (ngModelChange)="handleInput()"
      (keydown.arrowDown)="focusNextResult()"
      (keydown.arrowUp)="focusPrevResult()"
      (keydown.enter)="handleEnter()" />
  </div>

  <div @nested *ngIf="results.length > 0" class="subtitle">Results</div>

  <ul @nested class="results" *ngIf="results.length > 0">
    <li *ngFor="let result of results; let index = index"
      [ngClass]="{ focused: index === focusedResult }"
      (click)="selectResult(result)"
      (mouseover)="focusResult(index)">{{ result.name }}</li>
  </ul>

  <div @nested *ngIf="results.length > 0" class="footer">
    Go to
    <div class="shortcut"><i class="icon enter"></i></div>
  </div>
</div>
